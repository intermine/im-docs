(window.webpackJsonp=window.webpackJsonp||[]).push([[462],{533:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var r=n(3),o=n(7),a=(n(0),n(549)),i={title:"SPARQL endpoint support"},p={unversionedId:"data-model/sparql",id:"version-5.0.0/data-model/sparql",isDocsHomePage:!1,title:"SPARQL endpoint support",description:"Since InterMine 5.1.0, the platform supports the building of SPARQL endpoint, which allows to query the data integrated in the intermine instance using SPARQL language.",source:"@site/versioned_docs/version-5.0.0/data-model/sparql.md",slug:"/data-model/sparql",permalink:"/im-docs/docs/data-model/sparql",editUrl:"https://github.com/intermine/im-docs/edit/master/versioned_docs/version-5.0.0/data-model/sparql.md",version:"5.0.0",sidebar:"version-5.0.0/someSidebar",previous:{title:"Decorating your model with ontologies",permalink:"/im-docs/docs/data-model/model-ontologies"},next:{title:"Data Download Scripts",permalink:"/im-docs/docs/database/download-scripts"}},c=[{value:"Install Ontop",id:"install-ontop",children:[]},{value:"Run the SPARQL endpoint",id:"run-the-sparql-endpoint",children:[]}],l={toc:c};function s(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Since InterMine 5.1.0, the platform supports the building of SPARQL endpoint, which allows to query the data integrated in the intermine instance using SPARQL language."),Object(a.b)("p",null,"An example using ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.flymine.org"}),"FlyMine")," integrated data, can be found ","[here]"," ([",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://sparql.flymine.org/"}),"https://sparql.flymine.org/"),")."),Object(a.b)("p",null,"The SPARL endpoint is based on an existing software, ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://ontop-vkg.org/"}),"Ontop"),", which translates SPARQL queries into SQL queries, relying on declarative mappings which defines how to map relational schema to RDF model."),Object(a.b)("p",null,"In order to generate the mapping specific for an intermine instance, run the create-R2RML-mapping postprocess. It will generate a file mapping.ttl."),Object(a.b)("p",null,"An example of configuration can be found in ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/intermine/flymine/blob/master/project.xml#L437"}),"flymine"),"."),Object(a.b)("h2",{id:"install-ontop"},"Install Ontop"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),'mkdir ontop-cli\ncd ontop-cli\n\nwget "https://github.com/ontop/ontop/releases/download/ontop-4.0.3/ontop-cli-4.0.3.zip"\nunzip ontop-cli-4.0.3.zip\n')),Object(a.b)("p",null,"Because InterMine uses postgresql, download the JDBC driver:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),'cd jdbc\nwget "https://jdbc.postgresql.org/download/postgresql-42.2.18.jar"\n')),Object(a.b)("p",null,"and create th file db.properties:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),"jdbc.url=jdbc:postgresql://localhost:5432/biotestmine #Change to your settinggs\njdbc.user=${YOUR_PGSQL_USERNAME}\njdbc.password=${YOUR_PGSQL_PASSWORD}\n")),Object(a.b)("h2",{id:"run-the-sparql-endpoint"},"Run the SPARQL endpoint"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),"./ontop endpoint -m mapping.ttl -p db.properties --port 8081\n")))}s.isMDXComponent=!0},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),s=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=s(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=s(n),b=r,m=d["".concat(i,".").concat(b)]||d[b]||u[b]||a;return n?o.a.createElement(m,p(p({ref:t},l),{},{components:n})):o.a.createElement(m,p({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=b;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var l=2;l<a;l++)i[l]=n[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);