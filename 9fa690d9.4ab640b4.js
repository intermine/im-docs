(window.webpackJsonp=window.webpackJsonp||[]).push([[310],{380:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return i})),r.d(t,"metadata",(function(){return s})),r.d(t,"toc",(function(){return c})),r.d(t,"default",(function(){return b}));var n=r(3),o=r(7),a=(r(0),r(546)),i={title:"JBrowse"},s={unversionedId:"webapp/third-party-tools/jbrowse",id:"version-4.0.0/webapp/third-party-tools/jbrowse",isDocsHomePage:!1,title:"JBrowse",description:"InterMine 1.3.1 supports the JBrowse REST web-service specification \\(see configuring JBrowse\\), which means that you can run a JBrowse installation directly off the InterMine web-services.",source:"@site/versioned_docs/version-4.0.0/webapp/third-party-tools/jbrowse.md",slug:"/webapp/third-party-tools/jbrowse",permalink:"/im-docs/docs/4.0.0/webapp/third-party-tools/jbrowse",editUrl:"https://github.com/intermine/im-docs/edit/master/versioned_docs/version-4.0.0/webapp/third-party-tools/jbrowse.md",version:"4.0.0",sidebar:"version-4.0.0/someSidebar",previous:{title:"Heatmap",permalink:"/im-docs/docs/4.0.0/webapp/third-party-tools/heatmap"},next:{title:"Google Analytics",permalink:"/im-docs/docs/4.0.0/webapp/monitoring-site-usage/google-analytics"}},c=[{value:"Build Your InterMine Database",id:"build-your-intermine-database",children:[]},{value:"Install JBrowse",id:"install-jbrowse",children:[]},{value:"Add JBrowse to InterMine",id:"add-jbrowse-to-intermine",children:[]},{value:"Point JBrowse at your InterMine",id:"point-jbrowse-at-your-intermine",children:[]},{value:"Configuring InterMine&#39;s JBrowse integration",id:"configuring-intermines-jbrowse-integration",children:[]}],l={toc:c};function b(e){var t=e.components,r=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},l,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"InterMine 1.3.1 supports the JBrowse REST web-service specification ","(","see ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/GMOD/jbrowse/wiki/JBrowse_Configuration_Guide/"}),"configuring JBrowse"),")",", which means that you can run a JBrowse installation directly off the InterMine web-services."),Object(a.b)("p",null,"This documentation has been tested with JBrowse-1.16.4."),Object(a.b)("h2",{id:"build-your-intermine-database"},"Build Your InterMine Database"),Object(a.b)("p",null,"If you want to be able to have a hierarchical view of your features on JBrowse, add this to the ",Object(a.b)("inlineCode",{parentName:"p"},"<post-processing>")," section of your project XML file and then build your database:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-markup"}),'<post-process name="populate-child-features"/>\n')),Object(a.b)("p",null,"See ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/im-docs/docs/4.0.0/database/database-building/post-processing/index"}),"Post processing")," for details."),Object(a.b)("h2",{id:"install-jbrowse"},"Install JBrowse"),Object(a.b)("p",null,"You will need an installation of JBrowse for this task. Instructions on doing this can be found at ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"http://jbrowse.org/code/latest-release/docs/tutorial/"}),"installing JBrowse"),"."),Object(a.b)("p",null,"Note: you need to set"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-markup"}),'<div class="jbrowse" id="GenomeBrowser" data-config=\'"allowCrossOriginDataRoot": true\'>\n')),Object(a.b)("p",null,"in the index.html file of your JBrowse installation."),Object(a.b)("h2",{id:"add-jbrowse-to-intermine"},"Add JBrowse to InterMine"),Object(a.b)("p",null,"Add JBrowse to your report pages by adding this entry to the ",Object(a.b)("inlineCode",{parentName:"p"},"webconfig-model.xml")," file of your mine (see FlyMine ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/intermine/flymine/blob/master/webapp/src/main/webapp/WEB-INF/webconfig-model.xml"}),"example"),"):"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-markup"}),'<reportdisplayer javaClass="org.intermine.bio.web.displayer.JBrowseDisplayer"\n                 jspName="model/jbrowseDisplayer.jsp"\n                 replacesFields=""\n                 placement="Genomics"\n                 types="SequenceFeature"/>\n')),Object(a.b)("p",null,"See ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/im-docs/docs/4.0.0/webapp/report-page/report-displayers-examples"}),"Report Displayers Examples")," for more information."),Object(a.b)("p",null,"Add the location of your JBrowse installation to your ",Object(a.b)("inlineCode",{parentName:"p"},"web.properties")," or mine properties file, for example:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"jbrowse.install.url = http://jbrowse.intermine.org\n")),Object(a.b)("h2",{id:"point-jbrowse-at-your-intermine"},"Point JBrowse at your InterMine"),Object(a.b)("p",null,"Add your new mine-based dataset to your configuration file. For example, to add ",Object(a.b)("em",{parentName:"p"},"D. melanogaster")," data from ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"http://www.flymine.org"}),"FlyMine")," as a JBrowse dataset, the following configuration in ",Object(a.b)("inlineCode",{parentName:"p"},"jbrowse_conf.json")," would suffice:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),'{ \n  "datasets": {\n     "FlyMine-7227": {\n      "url": "?data=http://www.flymine.org/query/service/jbrowse/config/7227",\n      "name": "FlyMine"\n    },\n    ...\n  }\n}\n')),Object(a.b)("p",null,"Once in place, you can visit your JBrowse ",Object(a.b)("inlineCode",{parentName:"p"},"index.html")," and see the data from ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"http://www.flymine.org"}),"FlyMine"),"."),Object(a.b)("h2",{id:"configuring-intermines-jbrowse-integration"},"Configuring InterMine's JBrowse integration"),Object(a.b)("p",null,"By default, all InterMine classes that inherit from the SequenceFeature model class will have tracks."),Object(a.b)("p",null,"However, this can be inappropriate since some of those classes may not have data."),Object(a.b)("p",null,"You can make entries in ",Object(a.b)("inlineCode",{parentName:"p"},"web.properties")," to configure which tracks appear. For instance, if you just want Gene, CDS, UTR and Promoter tracks then in ",Object(a.b)("inlineCode",{parentName:"p"},"<mine>/webapp/resources/web.properties")," configure:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"org.intermine.webservice.server.jbrowse.genomic.track.Gene.class=Gene\norg.intermine.webservice.server.jbrowse.genomic.track.CDS.class=CDS\norg.intermine.webservice.server.jbrowse.genomic.track.UTR.class=UTR\norg.intermine.webservice.server.jbrowse.genomic.track.Promoter.class=Promoter\n")),Object(a.b)("p",null,"Here, track names are the first component of the key after org.intermine.webservice.server.jbrowse.genomic.track ","(","e.g. Gene on the first line",")",". These track names are used to group related properties and are not used in JBrowse display. The rest of the key name ","(","here, always class",")"," specifies the InterMine class to be used for this track. ","<",'div class="jbrowse" id="GenomeBrowser" data-config="allowCrossOriginDataroot":true',">"," JBrowse parameters can also be set for individual tracks within InterMine. For instance, in ",Object(a.b)("inlineCode",{parentName:"p"},"web.properties"),", if one wanted to give all 4 of the tracks defined above different colours then one would set:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"org.intermine.webservice.server.jbrowse.genomic.track.Gene.style.color=red\norg.intermine.webservice.server.jbrowse.genomic.track.CDS.style.color=yellow\norg.intermine.webservice.server.jbrowse.genomic.track.UTR.style.color=green\norg.intermine.webservice.server.jbrowse.genomic.track.Promoter.style.color=blue\n")),Object(a.b)("p",null,"For the full list of properties, please see the canvas section of the ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/GMOD/jbrowse/wiki/JBrowse_Configuration_Guide/"}),"JBrowse Configuration Guide"),"."))}b.isMDXComponent=!0},546:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return m}));var n=r(0),o=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=o.a.createContext({}),b=function(e){var t=o.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=b(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=b(r),d=n,m=p["".concat(i,".").concat(d)]||p[d]||u[d]||a;return r?o.a.createElement(m,s(s({ref:t},l),{},{components:r})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"}}]);