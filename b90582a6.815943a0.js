(window.webpackJsonp=window.webpackJsonp||[]).push([[359],{429:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return r})),a.d(t,"toc",(function(){return o})),a.d(t,"default",(function(){return h}));var n=a(3),i=a(7),s=(a(0),a(549)),l={title:"Model Description"},r={unversionedId:"data-model/model",id:"version-4.0.0/data-model/model",isDocsHomePage:!1,title:"Model Description",description:"A database stored using the InterMine system is object-oriented and it loads data defined by a model description. This model description is defined in the file, &lt;MINENAME&gt;\\_model.xml. This page describes the format of this file and its implications.",source:"@site/versioned_docs/version-4.0.0/data-model/model.md",slug:"/data-model/model",permalink:"/im-docs/docs/4.0.0/data-model/model",editUrl:"https://github.com/intermine/im-docs/edit/master/versioned_docs/version-4.0.0/data-model/model.md",version:"4.0.0",sidebar:"version-4.0.0/someSidebar",previous:{title:"Data Model Overview",permalink:"/im-docs/docs/4.0.0/data-model/overview"},next:{title:"Using Class and Field Labels",permalink:"/im-docs/docs/4.0.0/data-model/data-labels"}},o=[{value:"What the Model governs",id:"what-the-model-governs",children:[]},{value:"Naming conventions",id:"naming-conventions",children:[]},{value:"The Model File Format",id:"the-model-file-format",children:[]},{value:"The &quot;&lt;model&gt;&quot; Tag",id:"the-model-tag",children:[]},{value:"The &quot;&lt;class&gt;&quot; Tag",id:"the-class-tag",children:[]},{value:"The &quot;&lt;attribute&gt;&quot; Tag",id:"the-attribute-tag",children:[]},{value:"The &quot;&lt;reference&gt;&quot; and &quot;&lt;collection&gt;&quot; Tags",id:"the-reference-and-collection-tags",children:[{value:"Types of relationship",id:"types-of-relationship",children:[]}]},{value:"Ontologies",id:"ontologies",children:[]},{value:"A short example",id:"a-short-example",children:[]}],c={toc:o};function h(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(s.b)("wrapper",Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)("p",null,"A database stored using the InterMine system is object-oriented and it loads data defined by a model description. This model description is defined in the file, ","<","MINENAME",">","_","model.xml. This page describes the format of this file and its implications."),Object(s.b)("h2",{id:"what-the-model-governs"},"What the Model governs"),Object(s.b)("p",null,"The Model is a description of the class hierarchy that is expected to be stored in the database, so it includes a description of the classes and fields of the data that will be stored. The model will typically be used to generate Java code for those classes automatically. The auto-generated classes will be pure Java beans, with fields as described in the Model, and with getters and setters. Each class can have any number of attributes ","(","which store primitive data, like numbers, dates, and strings",")",", references to other objects in the database, and collections of other objects in the database."),Object(s.b)("p",null,"Since all objects in the database ","(","except SimpleObjects",")",' are instances of InterMineObject, which has a unique field called "id", all objects in the database can be fetched individually by searching for that unique "id" value.'),Object(s.b)("h2",{id:"naming-conventions"},"Naming conventions"),Object(s.b)("p",null,"The model expects standard Java names for classes and attributes. That is:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"classes")),Object(s.b)("p",null,"start with an upper case letter and be CamelCase. The name can't include underscores or spaces."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"fields")),Object(s.b)("p",null,"(","attributes, references, collections",")"," should start with a lower case letter and be lowerCamelCase. The name shouldn't include underscores or spaces."),Object(s.b)("p",null,"It's possible to specify friendly names that will be displayed in place of the actual 'java-ised' name in the web interface."),Object(s.b)("h2",{id:"the-model-file-format"},"The Model File Format"),Object(s.b)("p",null,'The Model is defined in an XML file, with only a few different tags. The document root tag is "',"<","model",">",'", and contains a list of "',"<","class",">",'" tags, each of which describes a single class in the model. Class tags are not nested - the hierarchy is defined elsewhere, which allows multiple inheritance if necessary. All classes inherit all the fields of all its parent classes, so they should not be defined again.'),Object(s.b)("h2",{id:"the-model-tag"},'The "',"<","model",">",'" Tag'),Object(s.b)("p",null,'The "',"<","model",">",'" tag has two attributes, which are mandatory:'),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"name")),Object(s.b)("p",null,"This is the name of the model. It should match the name of the file ","(",'that is, a model called "testmodel" must be in a file called "testmodel',"_",'model.xml"',")",". A model can be fetched by name in Java by calling Model.getInstanceByName","(","String name",")"," as long as this file is in the classpath."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"package")),Object(s.b)("p",null,"This is a unique path that defines the model."),Object(s.b)("h2",{id:"the-class-tag"},'The "',"<","class",">",'" Tag'),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"name")),Object(s.b)("p",null,"This is the name of the class. All the classes must be in the same Java package."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"is-interface")),Object(s.b)("p",null,'This must be "true" or "false". If this is true, then the class is generated as a Java interface, which will allow multiple inheritance from this class. Objects which are instances of an interface can be created by using dynamic code generation using Java reflection, and there is surprisingly little performance cost. If this is false, then the class will be a normal Java class, and instances will be normal Java objects. However, a Java class can only have one non-interface parent class. The main FlyMine Model is entirely interface. ',Object(s.b)("em",{parentName:"p"},"In practice this field should always be set to true"),"."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"extends")),Object(s.b)("p",null,'This is an optional space-separated list of other classes, specifying the parent classes of this class. Only one of these parents may be a non-interface. If this attribute is not present, then the parent of the class will be "InterMineObject", which is indirectly the parent of all classes in the model ',"(","except SimpleObjects",")","."),Object(s.b)("p",null,'Inside the "',"<","class",">",'" tags are tags describing the fields of the class. These are "',"<","attribute",">",'", "',"<","reference",">",'", and "',"<","collection",">",'", none of which enclose any other XML tags. You should not define two fields with the same name for a particular class, taking into account that classes inherit all the fields of their parent classes. The InterMineObject class ',"(","which everything except SimpleObjects inherit",")",' has a field called "id".'),Object(s.b)("h2",{id:"the-attribute-tag"},'The "',"<","attribute",">",'" Tag'),Object(s.b)("p",null,"This tag defines a field in the class for storing primitive data, like numbers, dates, and Strings. It has two attributes:"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"name")),Object(s.b)("p",null,"This is the name of the field, as it will appear in the Java class, and in queries."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"type")),Object(s.b)("p",null,"This is the type of data that can be stored in the field, and must be one of the following:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},'Boolean or java.lang.Boolean - this stores a simple "true" or "false" value. The first type is a primitive value with only those two possible values, whereas the latter type is the Java Boolean Object, which can contain a third value of "null".'),Object(s.b)("li",{parentName:"ul"},"short or java.lang.Short - this stores a 16-bit signed integer value. Again, the latter type may also have a null value, as is the case with the rest of the numbers."),Object(s.b)("li",{parentName:"ul"},"int or java.lang.Integer - this stores a 32-bit signed integer value."),Object(s.b)("li",{parentName:"ul"},"long or java.lang.Long - this stores a 64-bit signed integer value."),Object(s.b)("li",{parentName:"ul"},"float or java.lang.Float - this stores a 32-bit floating-point number."),Object(s.b)("li",{parentName:"ul"},"double or java.lang.Double - this stores a 64-bit floating-point number."),Object(s.b)("li",{parentName:"ul"},"java.math.BigDecimal - this stores an arbitrary-precision floating point number. There is no Java primitive equivalent, so this field type may contain a null value."),Object(s.b)("li",{parentName:"ul"},"java.util.Date - this stores a date and time, with a resolution of one millisecond, or null."),Object(s.b)("li",{parentName:"ul"},"java.lang.String - this stores a portion of text of arbitrary length, or null.")),Object(s.b)("h2",{id:"the-reference-and-collection-tags"},'The "',"<","reference",">",'" and "',"<","collection",">",'" Tags'),Object(s.b)("p",null,'The "',"<","reference",">",'" tag defines a field in the class for storing a reference to another object in the database. The "',"<","collection",">",'" tag defines a field in the class for storing a collection of references to other objects in the database. Both of these relationships may be unidirectional or bidirectional. If they are bidirectional, that means that there is an equivalent relationship in the referenced class that points in the reverse direction, and two relationships will agree on their contents. All referenced objects must be in the database for the references and collections to be valid. Both of these tags have several attributes:'),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"name")),Object(s.b)("p",null,"This is the name of the field, as it will appear in the Java class, and in queries."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"referenced-type")),Object(s.b)("p",null,"This is the class name of the class of object that is referenced by the reference, or present in the collection."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"reverse-reference")),Object(s.b)("p",null,"This is an optional name of a reference or collection in the referenced-type that is the reverse of this relationship. Specifying this turns the relationship into a bidirectional relationship."),Object(s.b)("h3",{id:"types-of-relationship"},"Types of relationship"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"One to one relationship")),Object(s.b)("p",null,"This is where a reference has a reverse-relationship that is also a reference. Use of these is discouraged, because they suffer from performance and consistency problems, and can possibly be better modelled by combining the two classes into one."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"One to many relationship")),Object(s.b)("p",null,"This is where a collection has a reverse-relationship that is a reference. In this case, you should always fill in the reference and leave the collection empty ","(","it will be ignored",")","."),Object(s.b)("p",null,"e.g. Gene has a collection Transcripts and Transcript references one Gene, fill in Transcript.gene only."),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"Many to many relationship")),Object(s.b)("p",null,"This is where a collection has a reverse-relationship that is a collection, or where a collection does not have a reverse-relationship. This type of collection can be altered from either side, and the changes will be observed on both sides."),Object(s.b)("p",null,"In practice, if one side is very large and the other smaller, it is faster to populate the smaller collection."),Object(s.b)("p",null,"e.g. Gene has a collection of Pathways and Pathway has a collection of Genes, fill in either Gene.pathways or Pathway.genes but not both. If Pathway.genes contains e.g. 20,000 items and Gene.pathways typically 100 items, then it is faster to populate Gene.pathways."),Object(s.b)("h2",{id:"ontologies"},"Ontologies"),Object(s.b)("p",null,"It's possible to decorate your InterMine data model with ontology terms."),Object(s.b)("p",null,"This isn't used anywhere ","(","yet",")",", but will be used in the future when we start generating RDF."),Object(s.b)("p",null,"See ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/im-docs/docs/4.0.0/data-model/model-ontologies"}),"How to add ontology terms to your model")," for details."),Object(s.b)("h2",{id:"a-short-example"},"A short example"),Object(s.b)("pre",null,Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-markup"}),'<?xml version="1.0"?>\n<model name="testing" package="org.intermine.model.bio">\n\n  <class name="Protein" is-interface="true" term="http://semanticscience.org/resource/SIO_010043">\n    <attribute name="name" type="java.lang.String" term="http://edamontology.org/data_2099"/>\n    <attribute name="extraData" type="java.lang.String"/> \n    <collection name="features"  referenced-type="NewFeature" reverse-reference="protein"/>  \n  </class>\n\n  <class name="NewFeature" is-interface="true">\n    <attribute name="identifier" type="java.lang.String"/>  \n    <attribute name="confidence" type="java.lang.Double"/>\n    <reference name="protein" referenced-type="Protein" reverse-reference="features"/>\n  </class>\n</model>\n')),Object(s.b)("p",null,"For a more complete example, see ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"http://www.flymine.org/flymine/service/model"}),"FlyMine")," which covers all the features available in the model."),Object(s.b)("p",null,"The Model defines the set of data that is searchable in the database. Other data can be written to the database, but only the classes and attributes that are defined in the model are searchable. So you may, if you wish, compile a Java class which inherits InterMineObject ","(","to allow it to be stored in the database",")"," or some other class in the model, with extra fields, and store instances of that class in the database, but you will not be able to search for instances of that class, or for instances with a particular value for the field that is not in the model."))}h.isMDXComponent=!0},549:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a(0),i=a.n(n);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=i.a.createContext({}),h=function(e){var t=i.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=h(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},p=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=h(a),p=n,u=d["".concat(l,".").concat(p)]||d[p]||b[p]||s;return a?i.a.createElement(u,r(r({ref:t},c),{},{components:a})):i.a.createElement(u,r({ref:t},c))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,l=new Array(s);l[0]=p;var r={};for(var o in t)hasOwnProperty.call(t,o)&&(r[o]=t[o]);r.originalType=e,r.mdxType="string"==typeof e?e:n,l[1]=r;for(var c=2;c<s;c++)l[c]=a[c];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"}}]);