(window.webpackJsonp=window.webpackJsonp||[]).push([[361],{431:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return s}));var r=n(3),a=n(7),o=(n(0),n(549)),i={title:"SPARQL endpoint support"},p={unversionedId:"data-model/sparql",id:"data-model/sparql",isDocsHomePage:!1,title:"SPARQL endpoint support",description:"Since InterMine 5.1.0, the platform provides support for building a SPARQL endpoint, which allows to query via SPARQL, the data integrated in the intermine instance.",source:"@site/docs/data-model/sparql.md",slug:"/data-model/sparql",permalink:"/im-docs/docs/next/data-model/sparql",editUrl:"https://github.com/intermine/im-docs/edit/master/docs/data-model/sparql.md",version:"current",sidebar:"someSidebar",previous:{title:"Decorating your model with ontologies",permalink:"/im-docs/docs/next/data-model/model-ontologies"},next:{title:"Data Download Scripts",permalink:"/im-docs/docs/next/database/download-scripts"}},c=[{value:"Install Ontop",id:"install-ontop",children:[]},{value:"Run the SPARQL endpoint",id:"run-the-sparql-endpoint",children:[]}],l={toc:c};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Since InterMine 5.1.0, the platform provides support for building a SPARQL endpoint, which allows to query via SPARQL, the data integrated in the intermine instance."),Object(o.b)("p",null,"An example which exposes data integrated in ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.flymine.org"}),"FlyMine"),", can be found ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://sparql.flymine.org/"}),"here"),"."),Object(o.b)("p",null,"The SPARL endpoint is based on an existing software, ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://ontop-vkg.org/"}),"Ontop"),", which translates SPARQL queries into SQL queries, relying on declarative mappings which defines how to map relational schema to RDF model."),Object(o.b)("p",null,"In order to generate the intermine specific mapping, run the create-R2RML-mapping postprocess."),Object(o.b)("p",null,"The create-R2RML-mapping postprocess reads the genomic_model.xml file and generates the mapping.ttl file; it can be run at any time and it doesn't require any further action. You can find an example in ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/intermine/biotestmine/blob/master/mapping.ttl"}),"biotestmine"),"."),Object(o.b)("p",null,"In the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/intermine/flymine/blob/master/project.xml#L437"}),"project.xml")," file of FlyMine, you can find an example on how to configure the create-R2RML-mapping postprocess."),Object(o.b)("h2",{id:"install-ontop"},"Install Ontop"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),'mkdir ontop-cli\ncd ontop-cli\n\nwget "https://github.com/ontop/ontop/releases/download/ontop-4.0.3/ontop-cli-4.0.3.zip"\nunzip ontop-cli-4.0.3.zip\n')),Object(o.b)("p",null,"Because InterMine uses postgresql, download the JDBC driver:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),'cd jdbc\nwget "https://jdbc.postgresql.org/download/postgresql-42.2.18.jar"\n')),Object(o.b)("p",null,"and create th file db.properties:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),"jdbc.url=jdbc:postgresql://localhost:5432/biotestmine #Change to your settinggs\njdbc.user=${YOUR_PGSQL_USERNAME}\njdbc.password=${YOUR_PGSQL_PASSWORD}\n")),Object(o.b)("h2",{id:"run-the-sparql-endpoint"},"Run the SPARQL endpoint"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-markup"}),"./ontop endpoint -m mapping.ttl -p db.properties --port 8081\n")))}s.isMDXComponent=!0},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),s=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=s(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=s(n),b=r,m=d["".concat(i,".").concat(b)]||d[b]||u[b]||o;return n?a.a.createElement(m,p(p({ref:t},l),{},{components:n})):a.a.createElement(m,p({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=b;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var l=2;l<o;l++)i[l]=n[l];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);